<!DOCTYPE html>
<html>
<head>
	<title>My Memory Game (not a lousy copy...from school) </title>
	<style>
	#wrapper {
			  min-height:650px;
			  margin: auto;
			  text-align:center;
			  border:5px outset grey;
			  background: linear-gradient(to right, white, gray);}

	#moves   {width: 150px;
			  font-size:20px;
			  display:block;
			  margin:auto;
			  }

	#wins   {width: 150px;
			  font-size:20px;
			  display:block;
			  margin:auto;}

	.black   {min-height:220px;
			  width:220px;
			  text-align: center;
			  font-size: 35px;
			  line-height: 210px;
			  display: inline-block;
			  background-color:black;
			  border:5px outset grey;
			  margin:8px;

			  }

	.visible {min-height:220px;
			  width:220px;
			  text-align: center;
			  font-size: 35px;
			  line-height: 210px;
			  display: inline-block;
			  background-color:white;
			  border:5px outset grey;
			  margin:8px;
			  }

	#letter  {line-height:180px;
			  text-align:center;}

	#begin  {text-align:center;
			 border:3px outset grey;
			 font-size:20px;
			 margin:auto;}
	</style>
</head>
<body>
	<div id="wrapper">
			<div id="moves"></div>
			<div id="wins"></div>
		<input type="button" id="begin" value="Begin Game"/>
		<div class="row" id="container">
		
		</div>
	</div>

	<script type="text/javascript">

/////////////////////////////GENERAL PURPOSE VARIABLES//////////////////////////////
		var mainArray = ["A","A","B","B","C","C","D","D","E","E","F","F","G","G","H","H"];
		var flippedArray = [];
		var targetArray = [];
		var matchArray =[];
		var wrapper;
		var content;
		var button = document.getElementById("begin");
		var moveCount = 0;
		var winCount = 0;
		var moveCountHold = document.getElementById("moves").innerHTML = "Your Moves : " + moveCount;
		var winCountHold = document.getElementById("wins").innerHTML = "Wins : " + winCount;
//////////////////////////////VARIABLES FOR THE SHUFFLE METHOD//////////////////////////////
		var holder;
		var random;
///////////////ACTION BEGINS///////////////////////////////////////////
		button.addEventListener("click", letTheGameBegin, false);




		Array.prototype.shuffle = function() {
			for(i = 0; i < 7; i++) {
				for(j = this.length; j > 0; j--) {
					random = Math.floor(Math.random() * j);
					holder = this[random];
					this[random] = this[(j-1)];
					this[(j-1)] = holder;
				}
			}
		return this
		}
		//console.log(mainArray.shuffle()); CHECKING MYSELF... CHECK:SUCCESS!

		function letTheGameBegin () {
			container = document.getElementById("container");
			mainArray.shuffle();
			for(i = 0; i < mainArray.length; i++) {
				container.innerHTML += "<div class='black' id='" + i + "'>" + mainArray[i] + "</div>";

				
			}
			singTileId = document.getElementsByClassName("black");
			for(j = 0; j < singTileId.length; j++)
				singTileId[j].addEventListener("click", flipTile, false);
		}

		function flipTile (e) {
			var target = e.target;
			//console.log(target); //CHECKING MYSELF...GREAT SUCCESS!
			if(flippedArray.length < 2) {

				if(flippedArray.length == 0) {
					flippedArray.push(target.textContent);
					targetArray.push(target);
					 target.className ="visible";
					 // console.log(targetArray[0]);
					 // console.log(pairArray[0]);

				}else{
					flippedArray.push(target.textContent);
					targetArray.push(target);
					 target.className ="visible";
					 // console.log(targetArray[1]);
					 // console.log(pairArray[1]);
				
					if (flippedArray[0] == flippedArray[1]) {
					
						matchArray.push(flippedArray[0]);
						matchArray.push(flippedArray[1]);
					
						// console.log(pairArray[0]);
						// console.log(pairArray[1]);
						// console.log("success");
					    flippedArray = [];


					    moveCount++;
					    moveCountHold = document.getElementById("moves").innerHTML = "Your Moves : " + moveCount;

						if (matchArray.length == mainArray.length) {alert("Congratulations! You won the game!!!");
							winCount++;
							winCountHold = document.getElementById("wins").innerHTML = "Wins : " + winCount;
						}

						// console.log(pairArray.length);
						// console.log(mainArray.length);
					}else { 
					    function reTurn (){
					    	
						 	targetArray[(targetArray.length-1)].className = "black";
						 	// console.log(targetArray[0].getAttribute("class"));

						 	targetArray[(targetArray.length-2)].className = "black";
						 	// console.log(targetArray[1].getAttribute("class"));
						 	
						 	flippedArray = [];
					    	targetArray = [];
					    	moveCount++;
					    	// console.log(moveCount);
					    	moveCountHold = document.getElementById("moves").innerHTML = "Your Moves : " + moveCount;
						 }
						
						function timer () { var sg = setTimeout(reTurn, 1500);
											}
						timer();

					}
				}
		
			}

		}

		

		// console.log(mainArray.length);
		// console.log(flippedArray.length);
		// console.log(moveCount);

	</script>
</body>
</html>